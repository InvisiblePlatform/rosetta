<link rel="stylesheet" href="/css/plugin-styles.css">
<title>Invisible Voice - {{ .Params.title }}</title>

<div class="plugin-container">
  <div class="plugin-header">
      <span class="bk-bg co-name">{{ .Params.title }}</span>
    </div>
  </div>

  <div>
    <p class="disclaimer-text">
      We are confident the information we are showing is accurate, however we strongly advise you do your own research into any companies.
    </p>
  </div>

  <div class="content">
    {{ .Content }}
  </div>
  

</div>


<script>

  let goToTop = function() {
    window.scrollTo({
        top: 0,
        left: 0,
        behavior: 'smooth'
      })
  };

  let scrollToTopButton = document.querySelector('#scroll-to-top');

  scrollToTopButton.addEventListener('click', () => {
    goToTop();
  });

  let newsHeadlines = document.querySelectorAll('.in-the-news-wrapper h1, .in-the-news-wrapper h2');

  newsHeadlines.forEach(el => {
    let newEl = el.cloneNode(true);
    let newA = document.createElement('a');
    let ids = el.getAttribute('id');
    newEl.setAttribute("id", "");
    newA.setAttribute("href", "#" + ids);
    document.querySelector('.jump-to-section').appendChild(newA).appendChild(newEl);
  });

  let newsTitles = document.querySelectorAll('.in-the-news-wrapper a');

  newsTitles.forEach(el => {
    el.setAttribute("target", "_blank");
  });

  let hoverAnchors = document.querySelectorAll('.hover-anchor');
  let wW = window.innerWidth;

  hoverAnchors.forEach(el => {
    let elPos = el.getBoundingClientRect();
    let sixty = wW * 60 / 100;
    let hoverPop = el.querySelector('.hover-pop');

    if (elPos.left > sixty) {
      hoverPop.classList.remove('dot');
      hoverPop.classList.add('dot-right');
    }
  })

  let loadWikiInfo = function(x) {
  	let url = x.firstElementChild.getAttribute("href");	
  	if (url != "null"){
  		let term = url.replace("https://en.wikipedia.org/wiki/", ""); 
  		let requestURL = "https://en.wikipedia.org/api/rest_v1/page/summary/" + term + "?redirect=true"
  		$.ajax({
  		    url: requestURL
  		  }).done(function(data) {
  			if (data.thumbnail){
  				x.lastElementChild.innerHTML = "<img class='thumbnail' width='100%' src='" + data.thumbnail.source + "'> " + data.extract_html;	
  			} else {
  				x.lastElementChild.innerHTML = data.extract_html;	
  			}
  		  }).fail(function() {
  			  console.log("oh no")
  		});
  	} else {
  		x.lastElementChild.innerHTML = x.firstElementChild.innerHTML;
  	}
  	x.removeAttribute("onmouseover");
  }

</script>

    <script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"></script>

<!-- <div class="blog-post">
  <h1>Hello ?</h1>
  <div class="blog-post-subheader">
    <time>{{ .Date.Format "02 Jan 2006" }}</time>
  </div>
  <div class="blog-post-content">
    {{ .Content }}
  </div>
</div> -->
